<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{base}">

<head>
    <title>My Appointments</title>
</head>

<body>
<div layout:fragment="main" class="container mt-4">

    <h3>My Appointments</h3>

    <table class="table table-striped table-hover">
        <thead class="table-dark">
        <tr>
            <th>Request</th>
            <th>Date & Time</th>
            <th>Confirmed</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="a : ${appointments}">
            <td th:text="${a.request.title}"></td>
            <td th:text="${#temporals.format(a.date, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${a.confirmed ? 'Yes' : 'No'}"></td>
            <td>
                <div class="d-flex flex-column flex-md-row gap-2">

                    <form th:action="@{'/employee/empappointments/' + ${a.id} + '/confirm'}" method="post">
                        <button class="btn btn-sm btn-success"
                                type="submit"
                                th:disabled="${a.confirmed}">
                            Confirm
                        </button>
                    </form>

                    <form th:action="@{'/employee/empappointments/' + ${a.id} + '/reschedule'}" method="post" class="d-flex">
                        <input type="datetime-local" name="date" class="form-control form-control-sm" required>
                        <button class="btn btn-sm btn-warning ms-1" type="submit">Reschedule</button>
                    </form>

                    <form th:action="@{'/employee/empappointments/' + ${a.id} + '/cancel'}" method="post">
                        <button class="btn btn-sm btn-danger" type="submit">Cancel</button>
                    </form>

                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <div class="mt-3">
        <a th:href="@{/homepage}" class="btn btn-outline-primary">Back to Home</a>
    </div>

</div>
</body>
</html>
